import{i as z,a as K}from"./vendor-BRPE7r0H.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".nav-link");let t=window.location.pathname.split("/").pop();t!=="index.html"&&t!=="favorites.html"&&(t="index.html"),e.forEach(n=>{n.getAttribute("href")===t&&n.classList.add("active")})});const L=document.querySelector(".js-header"),B=document.querySelector("main"),F="is-scrolling",Z=e=>{e?L.classList.add(F):L.classList.remove(F)},ee=e=>{e?B.style.marginTop=`${L.offsetHeight}px`:B.style.marginTop=0},R=()=>{let e=window.scrollY>L.offsetTop;Z(e),ee(e)};document.addEventListener("DOMContentLoaded",()=>{R(),document.addEventListener("scroll",R)});const i=(e,t,n,o)=>{z.show({message:e,drag:!0,close:!1,timeout:5e3,position:"bottomRight",messageColor:"#2a2a2a",closeOnClick:!0,animateInside:!0,backgroundColor:n??"#f4f4f4",title:t??""})};async function te(){try{return await(await fetch("https://your-energy.b.goit.study/api/quote")).json()}catch{return i("Error fetching the quote:","Error ❌"),null}}function ne(e){const t=new Date().toISOString().split("T")[0];localStorage.setItem("dailyQuote",JSON.stringify({quote:e,date:t}))}function re(){const e=localStorage.getItem("dailyQuote");return e?JSON.parse(e):null}async function oe(){const e=re(),t=new Date().toISOString().split("T")[0];if(e&&e.date===t)return e.quote;{const n=await te();return n?(ne(n),n):e?e.quote:null}}async function se(){const e=await oe();if(e){const t=e.quote,n=e.author;document.querySelector(".quote").textContent=t,document.querySelector(".quote-author").textContent=n}}se();const I=()=>JSON.parse(localStorage.getItem("favorites"))||[];function ae(e){if(!e._id){i("Exercise ID is missing.","Error ❌");return}const t=I();t.find(n=>n._id===e._id)?i("This exercise is already in your favorites.","Error ❌"):(t.push(e),localStorage.setItem("favorites",JSON.stringify(t)),i("Exercise added to favorites!","Success ✅"))}function H(e,t){if(!e){i("Exercise ID is missing.","Error ❌");return}const n=I();if(!n.find(o=>o._id===e))i("This exercise is not in your favorites.","Error ❌");else{const o=n.filter(r=>r._id!==e);localStorage.setItem("favorites",JSON.stringify(o)),i("Exercise removed from favorites!","Success ✅"),t&&t()}}const m="https://your-energy.b.goit.study/api",g=async(e,t,n)=>{const s=await fetch(e,{headers:{"Content-type":"application/json"},method:t,body:n});if(!s.ok)throw new Error(`Error: status: ${s.status}, ${s.statusText}`);return s.json()},ie={async getExercises(e){const t=new URLSearchParams(e),n=`${m}/exercises?${t}`;return await g(n)},async getExercisesId(e){const t=`${m}/exercises/${e}`;return await g(t)},async editExercisesIdRating(e,t){const n="PATCH",o=`${m}/exercises/${e}/rating`,r=JSON.stringify(t);return await g(o,n,r)},async getExercisesFilter(e){const t=new URLSearchParams(e),n=`${m}/filters?${t}`;return await g(n)},async getExercisesQuote(){const e=`${m}/quote`;return await g(e)},async addSubscription(e){const t="POST",n=`${m}/subscription`,o=JSON.stringify(e);return await g(n,t,o)}},U=K.create({baseURL:m,headers:{"Content-type":"application/json"}}),v="/project-ilurgym2/assets/icons-DPmJyXT3.svg",y={MUSCLES:"Muscles",BODY_PARTS:"Body parts",EQUIPMENT:"Equipment"},E={EXERCISE:"exercises",CATEGORY:"categories"},Q=768;let _=y.MUSCLES,M=null;document.addEventListener("DOMContentLoaded",async()=>{if(document.getElementById("favorites"))O();else{const{categories:t,page:n,totalPages:o}=await k(y.MUSCLES);A(t),h(E.CATEGORY,n,o,y.MUSCLES),ce()}});const ce=()=>{const e=document.querySelectorAll(".filter-btn");e.forEach(t=>{t.addEventListener("click",async()=>{e.forEach(a=>a.classList.remove("active")),t.classList.add("active");const n=t.getAttribute("data-filter"),{categories:o,page:r,totalPages:s}=await k(n);A(o),h(E.CATEGORY,r,s,n)})})},k=async(e,t=1)=>{const n=window.innerWidth<Q?9:12;try{const r=(await U.get("/filters",{params:{filter:e,page:t,limit:n}})).data;return r.results?{categories:r.results,page:Number(r.page),totalPages:Number(r.totalPages)}:{categories:[],page:1,totalPages:1}}catch(o){return i(`Error fetching categories: ${o}`,"Error ❌"),{categories:[],page:1,totalPages:1}}},$=async(e,t,n=1,o=null)=>{const r=window.innerWidth<Q?8:10;try{const a=(await U.get("/exercises",{params:{page:n,limit:r,...e===y.MUSCLES&&{muscles:t},...e===y.BODY_PARTS&&{bodypart:t},...e===y.EQUIPMENT&&{equipment:t},...o&&{keyword:o}}})).data;return a.results?{exercises:a.results,page:Number(a.page),totalPages:Number(a.totalPages)}:{exercises:[],page:1,totalPages:1}}catch(s){return i(`Error fetching categories: ${s}`,"Error ❌"),{exercises:[],page:1,totalPages:1}}},A=e=>{const t=document.querySelector(".exercises-grid");if(!t)return;if(t.innerHTML="",J(!1),Y(!1),e.length===0){t.innerHTML="<p>No categories found.</p>";return}const n=document.createDocumentFragment();e.forEach(o=>{const r=document.createElement("div");r.classList.add("category-card"),r.innerHTML=`
      <img src="${o.imgURL}" alt="${o.name}" width="300px" height="300px"/>
      <h3>${o.name}</h3>
      <p>${o.filter}</p>
    `,r.addEventListener("click",async()=>{const{exercises:s,page:a,totalPages:c}=await $(o.filter,o.name);_=o.filter,M=o.name,w(s),h(E.EXERCISE,a,c,o.filter)}),n.appendChild(r)}),t.appendChild(n)},le=e=>`
  <div class="rating">
    <span>
      ${e}
    </span>
    <svg class="icon-star">
      <use href="${v}#icon-star-full"></use>
    </svg>
  </div>
`,de=e=>`
  <button class="trash-btn" data-id="${e}">
    <svg width="16px" height="16px">
      <use href="${v}#icon-trash"></use>
    </svg>
  </button>
`,w=(e,t=!1)=>{const n=document.querySelector(".exercises-grid");if(!n)return;if(n.innerHTML="",J(!0),Y(!0,M),e.length===0){n.innerHTML="<p>No exercises found.</p>";return}const o=e.map(({bodyPart:r,burnedCalories:s,target:a,name:c,rating:d,_id:f})=>`
    <div class="exercise-card">
      <div class="exercise-card-header">
        <div class="label">WORKOUT</div>
        ${t?de(f):le(d)}
        <button class="start-btn" data-id="${f}">
          Start
          <svg class="icon-arrow">
            <use href="${v}#icon-arrow-start"></use>
          </svg>
        </button>
      </div>
      <div class="title-wrapper">
        <div class="icon-run-exercises">
          <svg class="icon-run">
            <use href="${v}#icon-run"></use>
          </svg>
        </div>
        <div class="title">${c}</div>
      </div>
      <div class="details">
        <div class="details-item">
          Burned calories: <span>${s}</span>
        </div>
        <div class="details-item">
          Body part: <span>${r}</span>
        </div>
        <div class="details-item">
          Target:<span>${a}</span>
        </div>
      </div>
    </div>
  `).join(" ");n.insertAdjacentHTML("afterbegin",o),document.querySelectorAll(".exercise-card .start-btn").forEach(r=>{const s=r.getAttribute("data-id");s?r.addEventListener("click",()=>{ue(s)}):i("Exercise ID is missing.","Error ❌")}),document.querySelectorAll(".trash-btn").forEach(r=>{const s=r.getAttribute("data-id");s?r.addEventListener("click",()=>{H(s,O)}):i("Exercise ID is missing.","Error ❌")})},h=(e,t,n,o)=>{const r=document.getElementById("pagination");if(!r||(r.innerHTML="",n<=1))return;const s=document.createDocumentFragment();for(let a=1;a<=n;a++){const c=document.createElement("div");c.innerText=a,c.className=a===t?"page current":"page",c.addEventListener("click",async()=>{if(e===E.CATEGORY){const{categories:d}=await k(o,a);A(d),h(e,a,n,o)}else{const{exercises:d}=await $(o,null,a);w(d),h(e,a,n,o)}}),s.appendChild(c)}r.appendChild(s)},O=()=>{const e=document.querySelector(".exercises-grid"),t=I();t.length>0?w(t,!0):e.innerHTML=`<p class="empty-favorites">It appears that you haven't added any exercises to your favorites yet. To get started, you can add exercises that you like to your favorites for easier access in the future.</p>`},J=e=>{const t=document.getElementById("search-form");t&&(t.style.display=e?"block":"none",e?t.addEventListener("submit",D):t.removeEventListener("submit",D))},D=async e=>{e.preventDefault();const t=document.getElementById("search-input"),n=t.value.trim();if(t.value="",n==="")return;const{exercises:o}=await $(_,M,1,n);w(o),h(E.EXERCISE,1,1,_)},Y=(e,t="")=>{const n=document.querySelector(".exercises-header-span"),o=document.querySelector(".exercises-subcategory");!n||!o||(n.style.display=e?"flex":"none",o.textContent=t)};function ue(e,t){fetch(`https://your-energy.b.goit.study/api/exercises/${e}`).then(n=>{if(!n.ok)throw new Error("Failed to fetch exercise details.");return n.json()}).then(n=>{ye(n),ve()}).catch(n=>{i(`Error fetching exercise details: ${n}`,"Error ❌")})}function me(){const e=document.querySelector(".modal__block").getAttribute("data-id");if(e){q();const t=document.getElementById("ratingModal");t&&(G(),t.setAttribute("data-exercise-id",e),t.classList.add("is-visible"),ge(),document.addEventListener("keydown",V))}else i("Exercise ID is missing when trying to open the rating modal.","Error ❌")}document.addEventListener("click",function(e){e.target.closest(".rating-modal__exit")&&S()});document.addEventListener("click",function(e){const t=document.getElementById("ratingModal"),n=document.querySelector(".rating-modal__block");t.classList.contains("is-visible")&&t&&!n.contains(e.target)&&S()});const V=e=>{e.key==="Escape"&&S()};document.addEventListener("click",function(e){e.target.matches(".rating-modal__cancel-btn")&&S()});function S(){const e=document.getElementById("ratingModal");e&&(e.classList.remove("is-visible"),G(),document.removeEventListener("keydown",V))}function fe(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(e).toLowerCase())}function ge(){const e=document.querySelector(".rating-modal__stars");if(!e)return;const t=e.querySelectorAll("span");t.length!==0&&t.forEach((n,o)=>{n.addEventListener("click",function(){t.forEach(a=>a.classList.remove("selected"));for(let a=0;a<=o;a++)t[a].classList.add("selected");const r=o+1,s=document.querySelector(".rating-modal__value");s&&(s.textContent=r.toFixed(1),s.setAttribute("data-selected-rating",r))})})}function G(){const e=document.querySelector(".rating-modal__email"),t=document.querySelector(".rating-modal__comment"),n=document.querySelectorAll(".rating-modal__stars span"),o=document.querySelector(".rating-modal__value");e&&(e.value=""),t&&(t.value=""),n.length>0&&n.forEach(r=>r.classList.remove("selected")),o&&(o.textContent="0.0",o.removeAttribute("data-selected-rating"))}document.addEventListener("DOMContentLoaded",function(){document.addEventListener("click",function(e){var t,n,o;if(e.target.matches(".rating-btn")&&me(),e.target.matches(".rating-modal__submit-btn")){const r=document.getElementById("ratingModal"),s=r==null?void 0:r.getAttribute("data-exercise-id");if(!s)return;const a=(t=document.querySelector(".rating-modal__value"))==null?void 0:t.getAttribute("data-selected-rating");if(!a){i("Please select a rating.","Error ❌");return}const c=(n=document.querySelector(".rating-modal__email"))==null?void 0:n.value.trim(),d=(o=document.querySelector(".rating-modal__comment"))==null?void 0:o.value.trim();if(!a||!c||!d){i("Please fill in all fields.","Error ❌");return}if(!fe(c)){i("Please enter a valid email address.","Error ❌");return}const f={rate:Number(a),email:c,review:d};fetch(`https://your-energy.b.goit.study/api/exercises/${s}/rating`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}).then(l=>l.status===409?l.json().then(u=>{throw new Error(`Rating already submitted with this email: ${u.message}`)}):l.ok?l.json():l.json().then(u=>{throw new Error(`Failed to submit rating: ${u.message}`)})).then(l=>{i("Thank you for your feedback","Done ✅"),S()}).catch(l=>{l.message.includes("Rating already submitted with this email")?i("You have already submitted a rating using this email address.","Error ❌"):i("Error submitting rating. Please try again later.","Error ❌")})}})});const pe=e=>{const t=Math.round(e),n=Array(t).fill(`<svg class="icon-star"><use href="${v}#icon-star-full"></use></svg>`),o=Array(5-t).fill(`<svg class="icon-star"><use href="${v}#icon-star-empty"></use></svg>`);return`
    ${n.join("")}
    ${o.join("")}
  `},p=(e,t)=>{e.forEach(n=>n.style.display=t?"block":"none")};function ye(e){const t=document.querySelector(".modal-title"),n=document.querySelector(".modal-image"),o=document.querySelector(".modal-target"),r=document.querySelector(".modal-bodyPart"),s=document.querySelector(".modal-equipment"),a=document.querySelector(".modal-calories"),c=document.querySelector(".modal__description"),d=document.querySelector(".modal__block"),f=document.querySelector(".modal__rating");d.setAttribute("data-id",e._id),t.textContent=e.name||"No name available",n.src=e.gifUrl||"",n.alt=e.name||"Exercise image",o.textContent=e.target||"No target available",r.textContent=e.bodyPart||"No body part available",s.textContent=e.equipment||"No equipment available",a.textContent=`${e.burnedCalories||"N/A"}`,c.textContent=e.description||"No description available",f.innerHTML=`
    <span>${e.rating}</span>
    <span>${pe(e.rating)}</span>
  `;const l=document.querySelectorAll(".js-favorite-remove"),u=document.querySelectorAll(".js-favorite-add"),P=(JSON.parse(localStorage.getItem("favorites"))||[]).find(C=>C._id===e._id);p(l,P),p(u,!P);const N=document.querySelector(".favorites-btn"),X=document.getElementById("favorites");N.addEventListener("click",function(C){if(C.stopImmediatePropagation(),(JSON.parse(localStorage.getItem("favorites"))||[]).find(T=>T._id===e._id)){const T=X?O:void 0;H(e._id,T),p(l,!1),p(u,!0)}else ae(e),p(l,!0),p(u,!1);N.blur()})}function ve(){const e=document.querySelector(".modal");e?(e.classList.add("is-visible"),document.addEventListener("keydown",W)):i("Modal element is missing.","Error ❌")}function q(){const e=document.querySelector(".modal");e?(e.classList.remove("is-visible"),document.removeEventListener("keydown",W)):i("Modal element is missing.","Error ❌")}const j=document.querySelector(".modal-close");j&&j.addEventListener("click",q);document.addEventListener("click",e=>{const t=document.querySelector(".modal"),n=document.querySelector(".modal__block");t&&n&&t.classList.contains("is-visible")&&!n.contains(e.target)&&q()});const W=e=>{e.key==="Escape"&&q()},b=document.querySelector(".subscribe-form");if(b!==null){b.addEventListener("submit",e);async function e(o){o.preventDefault();const r=o.target.elements.email.value;try{await ie.addSubscription({email:r}),i("You have subscribed 🥳","Congratulations!","#f4f4f4")}catch{i("Subscription already exists 😊","","#c6cdd1")}finally{o.target.reset(),localStorage.removeItem("subscribe-form-email")}}const t={email:""};(o=>{const r=JSON.parse(localStorage.getItem("subscribe-form-email"));if(r!==null)for(const s in r)r.hasOwnProperty(s)&&(o.elements[s].value=r[s],t[s]=r[s])})(b),b.addEventListener("input",o=>{const r=o.target.name,s=o.target.value.trim();t[r]=s,localStorage.setItem("subscribe-form-email",JSON.stringify(t))})}(()=>{let e=document.querySelector(".js-menu-container"),t=document.querySelector(".js-open-menu"),n=document.querySelector(".js-close-menu"),o=[...document.getElementsByClassName("mobile-menu-link")],r=()=>{let a=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",!a),e.classList.toggle("is-open"),document.body.style.overflow=a?"auto":"hidden"};const s=()=>{window.matchMedia("(max-width: 767px)").matches?(t.addEventListener("click",r),n.addEventListener("click",r),o.forEach(a=>{a.addEventListener("click",r)})):(t.removeEventListener("click",r),n.removeEventListener("click",r),o.forEach(a=>{a.removeEventListener("click",r)}),e.classList.remove("is-open"),t.setAttribute("aria-expanded",!1))};window.addEventListener("resize",s),s()})();const he=()=>{document.querySelector(".preloader").classList.add("preloader--hidden")};document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{he()},500)});let x=document.getElementById("myBtn");document.getElementsByClassName(".footer");x&&(x.onclick=function(){Se()});window.onscroll=function(){Ee()};function Ee(){document.body.scrollTop>20||document.documentElement.scrollTop>20?x.style.display="block":x.style.display="none"}function Se(){document.body.scrollTop=0,document.documentElement.scrollTop=0}
//# sourceMappingURL=main-VGMIVswG.js.map
